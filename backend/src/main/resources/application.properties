spring.application.name=backend

# MySQL Database Configuration
# Nếu không có DB_URL trong environment, sẽ dùng giá trị default n� y
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# HikariCP Connection Pool Configuration
# Giảm maxLifetime để tránh lỗi "No operations allowed after connection closed"
spring.datasource.hikari.max-lifetime=600000
# Connection timeout (30 giây)
spring.datasource.hikari.connection-timeout=30000
# Validation timeout (5 giây)
spring.datasource.hikari.validation-timeout=5000
# Minimum idle connections
spring.datasource.hikari.minimum-idle=5
# Maximum pool size
spring.datasource.hikari.maximum-pool-size=20
# Connection test query
spring.datasource.hikari.connection-test-query=SELECT 1
# Leak detection threshold (10 phút)
spring.datasource.hikari.leak-detection-threshold=600000

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# JWT Configuration
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION}
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION}

# Server Configuration
server.port=7070

# Logging Configuration
logging.level.com.doctorbooking.backend.config.JwtAuthenticationFilter=INFO
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.web.FilterChainProxy=DEBUG
logging.level.org.springframework.security.web.access.intercept.AuthorizationFilter=DEBUG

# Google Gemini AI Configuration
google.ai.api-key=${GOOGLE_AI_API_KEY:default-key-for-development}